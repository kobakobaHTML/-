<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç·´ç¿’è¨˜éŒ²ã‚¢ãƒ—ãƒªï¼ˆå‰Šé™¤ãƒœã‚¿ãƒ³ä»˜ãï¼‰</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body class="p-4">

  <h1 id="pageTitle">ğŸ“ ç·´ç¿’è¨˜éŒ²</h1>

  <form id="timeForm" class="mb-4">
    <div class="mb-3">
      <label for="practiceType" class="form-label">ç·´ç¿’ã®ç¨®é¡</label>
      <input type="text" id="practiceType" class="form-control" placeholder="ä¾‹ï¼šHTMLã€ãƒ”ã‚¢ãƒã€è‹±èª" required>
    </div>
    <div class="mb-3">
      <label for="songInput" class="form-label">å†…å®¹ï¼ˆæ›²åã‚„èª²é¡Œåï¼‰</label>
      <input type="text" id="songInput" class="form-control" required>
    </div>
    <div class="mb-3">
      <label for="minutesInput" class="form-label">ç·´ç¿’æ™‚é–“ï¼ˆåˆ†ï¼‰</label>
      <input type="number" id="minutesInput" class="form-control" required>
    </div>
    <button type="submit" class="btn btn-success">è¨˜éŒ²ã™ã‚‹</button>
  </form>

  <h2>è¨˜éŒ²ä¸€è¦§</h2>
  <table class="table table-bordered table-striped">
    <thead class="table-light">
      <tr>
        <th>#</th>
        <th>æ—¥ä»˜</th>
        <th>ç¨®é¡</th>
        <th>å†…å®¹</th>
        <th>æ™‚é–“ï¼ˆåˆ†ï¼‰</th>
        <th>å‰Šé™¤</th>
      </tr>
    </thead>
    <tbody id="recordTableBody">
      <!-- è¨˜éŒ²ã‚’ã“ã“ã«è¡¨ç¤º -->
    </tbody>
  </table>

  <script>
    const form = document.getElementById("timeForm");
    const practiceType = document.getElementById("practiceType");
    const songInput = document.getElementById("songInput");
    const minutesInput = document.getElementById("minutesInput");
    const tableBody = document.getElementById("recordTableBody");
    const title = document.getElementById("pageTitle");

    let records = JSON.parse(localStorage.getItem("practiceRecords")) || [];

    function displayRecords() {
      tableBody.innerHTML = "";
      records.forEach((record, index) => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${index + 1}</td>
          <td>${record.date}</td>
          <td>${record.type}</td>
          <td>${record.song}</td>
          <td>${record.minutes}</td>
          <td>
            <button class="btn btn-sm btn-danger" onclick="deleteRecord(${index})">å‰Šé™¤</button>
          </td>
        `;
        tableBody.appendChild(tr);
      });
    }

    function updateTitle() {
      const type = practiceType.value.trim();
      title.textContent = type ? `ğŸ“ ${type} ç·´ç¿’è¨˜éŒ²` : "ğŸ“ ç·´ç¿’è¨˜éŒ²";
    }

    function deleteRecord(index) {
      if (confirm("ã“ã®è¨˜éŒ²ã‚’æœ¬å½“ã«æ¶ˆã—ã¦ãˆãˆã‚“ï¼Ÿ")) {
        records.splice(index, 1); // é…åˆ—ã‹ã‚‰å‰Šé™¤
        localStorage.setItem("practiceRecords", JSON.stringify(records));
        displayRecords(); // è¡¨ã‚’æ›´æ–°
      }
    }

    displayRecords();
    updateTitle();

    practiceType.addEventListener("input", updateTitle);

    form.addEventListener("submit", function(event) {
      event.preventDefault();

      const type = practiceType.value.trim();
      const song = songInput.value.trim();
      const minutes = Number(minutesInput.value);
      const now = new Date();
      const date = now.toLocaleDateString();

      if (!type || !song || minutes <= 0) {
        alert("å…¨éƒ¨ã¡ã‚ƒã‚“ã¨å…¥ã‚Œã¦ãªï¼");
        return;
      }

      const newRecord = {
        date: date,
        type: type,
        song: song,
        minutes: minutes
      };

      records.push(newRecord);
      localStorage.setItem("practiceRecords", JSON.stringify(records));
      displayRecords();
      updateTitle();

      // å…¥åŠ›ãƒªã‚»ãƒƒãƒˆ
      practiceType.value = "";
      songInput.value = "";
      minutesInput.value = "";
    });

    // ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«é–¢æ•°ã‚’å…¬é–‹ï¼ˆonclickã§ä½¿ã†ãŸã‚ï¼‰
    window.deleteRecord = deleteRecord;
  </script>

</body>
</html>
