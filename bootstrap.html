<!DOCTYPE html>
<html lang="ja"> <!-- æ—¥æœ¬èªã‚µã‚¤ãƒˆãªã®ã§langå±æ€§ -->
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- SEOå‘ã‘ã‚¿ã‚¤ãƒˆãƒ« -->
  <title>ç·´ç¿’è¨˜éŒ²ã‚¢ãƒ—ãƒªï½œç°¡å˜ã«å­¦ç¿’ãƒ»è¶£å‘³ã®ç·´ç¿’æ™‚é–“ã‚’ç®¡ç†</title>
  
  <!-- ãƒ¡ã‚¿ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆæ¤œç´¢çµæœã«è¡¨ç¤ºã•ã‚Œã‚‹èª¬æ˜æ–‡ï¼‰ -->
  <meta name="description" content="HTMLã€ãƒ”ã‚¢ãƒã€è‹±èªãªã©ã®ç·´ç¿’æ™‚é–“ã‚’ç°¡å˜ã«è¨˜éŒ²ã§ãã‚‹ç„¡æ–™ã‚¢ãƒ—ãƒªã€‚å°å­¦ç”Ÿã‹ã‚‰å¤§äººã¾ã§ä½¿ã„ã‚„ã™ã„ã‚·ãƒ³ãƒ—ãƒ«ãªç·´ç¿’è¨˜éŒ²ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚">
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body class="p-4">

  <header>
    <h1 id="pageTitle">ğŸ“ ç·´ç¿’è¨˜éŒ²ã‚¢ãƒ—ãƒª</h1>
    <p>æ¯æ—¥ã®ç·´ç¿’æ™‚é–“ã‚„å†…å®¹ã‚’ç°¡å˜ã«è¨˜éŒ²ã—ã¦ã€ä¸Šé”ã‚’å®Ÿæ„Ÿã—ã‚ˆã†ï¼</p>
  </header>

  <main>
    <form id="timeForm" class="mb-4" aria-label="ç·´ç¿’è¨˜éŒ²ãƒ•ã‚©ãƒ¼ãƒ ">
      <div class="mb-3">
        <label for="practiceType" class="form-label">ç·´ç¿’ã®ç¨®é¡ï¼ˆä¾‹ï¼šHTMLã€ãƒ”ã‚¢ãƒã€è‹±èªï¼‰</label>
        <input type="text" id="practiceType" class="form-control" placeholder="ç·´ç¿’ã®ç¨®é¡ã‚’å…¥åŠ›" required aria-required="true" />
      </div>
      <div class="mb-3">
        <label for="songInput" class="form-label">å†…å®¹ï¼ˆæ›²åã‚„èª²é¡Œåãªã©ï¼‰</label>
        <input type="text" id="songInput" class="form-control" placeholder="å†…å®¹ã‚’å…¥åŠ›" required aria-required="true" />
      </div>
      <div class="mb-3">
        <label for="minutesInput" class="form-label">ç·´ç¿’æ™‚é–“ï¼ˆåˆ†ï¼‰</label>
        <input type="number" id="minutesInput" class="form-control" placeholder="ç·´ç¿’ã—ãŸæ™‚é–“ã‚’åˆ†ã§å…¥åŠ›" required aria-required="true" min="1" />
      </div>
      <button type="submit" class="btn btn-success">è¨˜éŒ²ã™ã‚‹</button>
    </form>

    <section aria-label="ç·´ç¿’è¨˜éŒ²ä¸€è¦§">
      <h2>è¨˜éŒ²ä¸€è¦§</h2>
      <table class="table table-bordered table-striped">
        <thead class="table-light">
          <tr>
            <th scope="col">#</th>
            <th scope="col">æ—¥ä»˜</th>
            <th scope="col">ç¨®é¡</th>
            <th scope="col">å†…å®¹</th>
            <th scope="col">æ™‚é–“ï¼ˆåˆ†ï¼‰</th>
            <th scope="col">å‰Šé™¤</th>
          </tr>
        </thead>
        <tbody id="recordTableBody">
          <!-- è¨˜éŒ²ã‚’ã“ã“ã«è¡¨ç¤º -->
        </tbody>
      </table>
    </section>
  </main>

  <script>
    const form = document.getElementById("timeForm");
    const practiceType = document.getElementById("practiceType");
    const songInput = document.getElementById("songInput");
    const minutesInput = document.getElementById("minutesInput");
    const tableBody = document.getElementById("recordTableBody");
    const title = document.getElementById("pageTitle");

    let records = JSON.parse(localStorage.getItem("practiceRecords")) || [];

    function displayRecords() {
      tableBody.innerHTML = "";
      records.forEach((record, index) => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${index + 1}</td>
          <td>${record.date}</td>
          <td>${record.type}</td>
          <td>${record.song}</td>
          <td>${record.minutes}</td>
          <td>
            <button class="btn btn-sm btn-danger" onclick="deleteRecord(${index})" aria-label="è¨˜éŒ²${index + 1}ã‚’å‰Šé™¤">å‰Šé™¤</button>
          </td>
        `;
        tableBody.appendChild(tr);
      });
    }

    function updateTitle() {
      const type = practiceType.value.trim();
      title.textContent = type ? `ğŸ“ ${type} ç·´ç¿’è¨˜éŒ²ã‚¢ãƒ—ãƒª` : "ğŸ“ ç·´ç¿’è¨˜éŒ²ã‚¢ãƒ—ãƒª";
    }

    function deleteRecord(index) {
      if (confirm("ã“ã®è¨˜éŒ²ã‚’æœ¬å½“ã«æ¶ˆã—ã¦ãˆãˆã‚“ï¼Ÿ")) {
        records.splice(index, 1);
        localStorage.setItem("practiceRecords", JSON.stringify(records));
        displayRecords();
      }
    }

    displayRecords();
    updateTitle();

    practiceType.addEventListener("input", updateTitle);

    form.addEventListener("submit", function(event) {
      event.preventDefault();

      const type = practiceType.value.trim();
      const song = songInput.value.trim();
      const minutes = Number(minutesInput.value);
      const now = new Date();
      const date = now.toLocaleDateString();

      if (!type || !song || minutes <= 0) {
        alert("å…¨éƒ¨ã¡ã‚ƒã‚“ã¨å…¥ã‚Œã¦ãªï¼");
        return;
      }

      const newRecord = {
        date: date,
        type: type,
        song: song,
        minutes: minutes
      };

      records.push(newRecord);
      localStorage.setItem("practiceRecords", JSON.stringify(records));
      displayRecords();
      updateTitle();

      // å…¥åŠ›ãƒªã‚»ãƒƒãƒˆ
      practiceType.value = "";
      songInput.value = "";
      minutesInput.value = "";
    });

    window.deleteRecord = deleteRecord;
  </script>

</body>
</html>
